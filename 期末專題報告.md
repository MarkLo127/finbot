# 114 互動科技 期末專題報告

## 📋 基本資訊

- **組別**：第 xxx 組
- **題目**：FinBot - 智慧記帳聊天機器人
- **YouTube 影片標題**：[114互動科技]第xxx組期末報告，題目：FinBot 智慧記帳聊天機器人
- **影片連結**：（請填入 YouTube 不公開連結）

---

## 👥 組員資訊

| 學號 | 姓名 | 負責項目 |
|------|------|----------|
|      |      |          |
|      |      |          |
|      |      |          |

---

## 📝 摘要

FinBot 是一款基於自然語言處理技術的智慧記帳聊天機器人，使用者可以透過日常對話的方式輕鬆記錄收入與支出。系統支援**自然語言記帳**、**語音輸入**、**智慧分類**、**預算管理**以及**財務分析**等功能，讓記帳變得簡單直覺。

### 主要特色：
- 🗣️ **自然語言輸入**：直接說「午餐吃了 120 元」即可記帳
- 🎤 **語音記帳**：支援中文語音辨識，說出來就能記
- 📊 **智慧分析**：自動分類消費、生成財務報告
- 🎯 **預算管理**：設定各類別預算上限，超支提醒
- 📈 **視覺化圖表**：類別分佈、消費趨勢一目了然

---

## 🎯 專題目標與動機

### 動機
傳統記帳 App 需要手動選擇類別、輸入金額，操作繁瑣導致使用者容易放棄。我們希望透過聊天機器人的形式，讓記帳就像跟朋友聊天一樣自然，大幅降低使用門檻。

### 目標
1. 開發一個能理解中文日常對話的記帳機器人
2. 整合語音辨識，實現免打字記帳
3. 提供智慧財務分析與預算建議
4. 建立完整的 Web 應用介面

---

## 🛠️ 系統架構

### 技術棧

| 層級 | 技術 |
|------|------|
| 前端 | Vue 3 + TypeScript + Vite |
| 後端 | Python FastAPI |
| 資料庫 | SQLite |
| NLP 處理 | jieba 中文分詞 + 規則引擎 |
| 語音辨識 | Web Speech API |
| 部署 | Railway |

### 系統架構圖

```
┌─────────────────────────────────────────────────────────┐
│                     前端 (Vue 3)                        │
│  ┌─────────┐ ┌──────────┐ ┌─────────┐ ┌──────────┐     │
│  │ 聊天室  │ │ 儀表板   │ │ 預算    │ │ 交易紀錄 │     │
│  │ChatView │ │Dashboard │ │BudgetVw │ │HistoryVw│     │
│  └────┬────┘ └────┬─────┘ └────┬────┘ └────┬─────┘     │
│       │           │            │           │           │
│       └───────────┴─────┬──────┴───────────┘           │
│                         │                               │
│              ┌──────────▼──────────┐                   │
│              │  Web Speech API     │ ← 語音辨識        │
│              └──────────┬──────────┘                   │
└─────────────────────────┼───────────────────────────────┘
                          │ HTTP/REST API
┌─────────────────────────▼───────────────────────────────┐
│                   後端 (FastAPI)                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │                   Routers                        │   │
│  │  ┌──────┐ ┌────────────┐ ┌───────┐ ┌─────────┐ │   │
│  │  │ Chat │ │Transactions│ │Budget │ │Analytics│ │   │
│  │  └──┬───┘ └─────┬──────┘ └───┬───┘ └────┬────┘ │   │
│  └─────┼───────────┼────────────┼──────────┼───────┘   │
│        │           │            │          │           │
│  ┌─────▼───────────▼────────────▼──────────▼───────┐   │
│  │                   Services                       │   │
│  │  ┌───────────┐ ┌─────────────┐ ┌─────────────┐  │   │
│  │  │NLP Parser │ │ AI Analyzer │ │Report Gen.  │  │   │
│  │  │(jieba)    │ │(規則引擎)   │ │             │  │   │
│  │  └───────────┘ └─────────────┘ └─────────────┘  │   │
│  └─────────────────────────────────────────────────┘   │
│                          │                              │
│  ┌───────────────────────▼─────────────────────────┐   │
│  │                    Models                        │   │
│  │ ┌───────────┐ ┌──────────┐ ┌────────┐ ┌──────┐ │   │
│  │ │Transaction│ │ Category │ │ Budget │ │Convo │ │   │
│  │ └───────────┘ └──────────┘ └────────┘ └──────┘ │   │
│  └─────────────────────────────────────────────────┘   │
│                          │                              │
│                    ┌─────▼─────┐                       │
│                    │  SQLite   │                       │
│                    └───────────┘                       │
└─────────────────────────────────────────────────────────┘
```

---

## 💬 Intent 設計 (Dialogflow 對應概念)

雖然本專案使用自建 NLP 引擎而非 Dialogflow，但概念上對應如下：

### Intent 列表

| Intent 名稱 | 說明 | Training Phrases 範例 | Response 範例 |
|-------------|------|------------------------|---------------|
| **record_expense** | 記錄支出 | 「午餐 120 元」<br>「昨天搭捷運 35」<br>「買衣服 500 塊」<br>「喝咖啡 60」 | ✅ 已記錄支出！<br>📝 🍔 餐飲<br>💰 $120<br>📅 今天 |
| **record_income** | 記錄收入 | 「領薪水 50000」<br>「收到紅包 1000」<br>「投資收益 5000」 | ✅ 已記錄收入！<br>📝 💼 薪資<br>💰 $50,000 |
| **query_summary** | 查詢統計 | 「這個月花了多少？」<br>「本月支出統計」<br>「今天消費多少」 | 📊 本月財務摘要<br>💸 總支出：$12,500<br>💰 總收入：$50,000 |
| **query_category** | 類別查詢 | 「餐飲花多少」<br>「這個月交通費」<br>「娛樂支出統計」 | 📊 餐飲支出查詢<br>💸 總金額：$3,500<br>📝 共 28 筆交易 |
| **ask_analysis** | 消費分析 | 「是不是外食太多」<br>「怎麼省錢」<br>「分析一下消費」 | 📊 您的餐飲支出為 $3,500，佔總支出 28%...<br>💡 建議：可以嘗試自己煮... |
| **get_trend** | 趨勢查詢 | 「消費趨勢」<br>「近三個月變化」 | 📈 您共有 45 筆支出，總金額 $12,500... |

### Entity 設計

| Entity 名稱 | 說明 | 範例值 |
|-------------|------|--------|
| **@amount** | 金額 | 120、五百、$1000、NT$500 |
| **@category** | 消費類別 | 餐飲、交通、娛樂、購物、醫療、居住、教育 |
| **@date** | 日期 | 今天、昨天、前天、上週、這個月 |
| **@income_category** | 收入類別 | 薪資、投資、其他收入 |
| **@period** | 時間區間 | 本月、上個月、今年、近三個月 |
| **@chart_type** | 圖表類型 | 圓餅圖、折線圖、長條圖 |

### 類別關鍵字對應（NLP Parser 實作）

```python
CATEGORY_KEYWORDS = {
    "餐飲": ["吃", "餐", "飯", "午餐", "晚餐", "早餐", "宵夜", "飲料", "咖啡", ...],
    "交通": ["車", "捷運", "公車", "uber", "計程車", "高鐵", "火車", "加油", ...],
    "娛樂": ["電影", "遊戲", "KTV", "唱歌", "玩", "門票", "旅遊", "Netflix", ...],
    "購物": ["買", "購", "衣服", "鞋", "3C", "電器", "網購", "蝦皮", ...],
    "醫療": ["醫", "藥", "看診", "掛號", "健檢", "牙", "診所", ...],
    "居住": ["房租", "水電", "電費", "水費", "瓦斯", "管理費", ...],
    "教育": ["書", "課", "學費", "補習", "教材", "文具", ...],
    "薪資": ["薪", "薪水", "工資", "發薪", "獎金", "年終"],
    "投資": ["股", "基金", "利息", "股利", "配息"],
    "其他收入": ["收入", "入帳", "紅包", "禮金", "中獎"],
}
```

---

## ⚙️ 實作步驟

### 第一階段：需求分析與設計（第 1-2 週）
1. 分析記帳 App 使用者需求
2. 設計系統架構與 API 規格
3. 確定技術棧選擇
4. 設計資料庫 Schema

### 第二階段：後端開發（第 3-5 週）
1. **建立 FastAPI 專案架構**
   - 設定 CORS 跨域
   - 建立路由模組化結構

2. **設計資料模型**
   - Transaction（交易記錄）
   - Category（類別）
   - Budget（預算）
   - Conversation（對話歷史）

3. **開發 NLP 解析器**
   - 使用 jieba 進行中文分詞
   - 實作金額擷取（支援中文數字轉換）
   - 實作日期解析
   - 建立類別關鍵字映射

4. **開發 AI 分析模組**
   - 消費分析邏輯
   - 預算建議演算法
   - 智慧摘要生成

5. **實作 API 路由**
   - `/api/chat/message` - 聊天訊息處理
   - `/api/transactions` - 交易 CRUD
   - `/api/budgets` - 預算管理
   - `/api/analytics` - 統計分析

### 第三階段：前端開發（第 6-8 週）
1. **建立 Vue 3 專案**
   - TypeScript 配置
   - 全域樣式設計（Pixel Art 風格）

2. **開發核心元件**
   - ChatView（聊天介面）
   - DashboardView（儀表板）
   - BudgetView（預算管理）
   - HistoryView（交易紀錄）

3. **整合 Web Speech API**
   - 語音辨識功能
   - 語音回饋（TTS）

### 第四階段：整合測試與部署（第 9-10 週）
1. 前後端 API 串接測試
2. 多種輸入情境測試
3. Railway 雲端部署
4. 效能優化

---

## 🖥️ 功能展示

### 1. 聊天記帳介面
- 自然語言輸入記帳
- 即時回饋確認
- 語音輸入按鈕

### 2. 財務儀表板
- 本月收支摘要
- 類別分佈圖表
- 近 6 個月趨勢圖
- 智慧分析摘要

### 3. 預算管理
- 設定各類別預算
- 預算使用進度條
- 超支警示

### 4. 交易紀錄
- 完整交易歷史
- 篩選與搜尋
- 編輯與刪除

---

## 🎬 影片互動 DEMO 腳本

### 開場（0:00 - 1:00）
- 組別、組員學號姓名展示
- 專題主題介紹

### 摘要介紹（1:00 - 2:00）
- FinBot 功能簡介
- 解決的痛點說明

### Dialogflow / NLP 設計說明（2:00 - 5:00）
> *（使用程式碼畫面 / 簡報說明）*
- Intent 設計理念
- Entity 定義
- Training Phrases 舉例
- NLP Parser 核心邏輯展示

### 實際對話 DEMO（5:00 - 10:00）
展示以下對話情境：

1. **基本記帳**
   - 「午餐吃便當 85 元」
   - 「昨天搭捷運 35」
   - 「買咖啡 60」

2. **語音輸入**
   - 點擊麥克風按鈕
   - 語音說出「晚餐 150 元」

3. **查詢統計**
   - 「這個月花了多少？」
   - 「餐飲支出統計」

4. **智慧分析**
   - 「是不是外食太多？」
   - 「怎麼省錢？」

5. **儀表板展示**
   - 類別分佈圖
   - 趨勢圖表
   - 智慧摘要

### 結論與心得（10:00 - 12:00）
- 專題成果總結
- 技術心得分享
- 未來改進方向

---

## 💡 結論與心得

### 專題成果
1. 成功實現自然語言記帳功能，準確率達 90% 以上
2. 語音輸入大幅提升使用便利性
3. 智慧分析功能能提供有價值的財務建議
4. 完成雲端部署，可實際使用

### 技術心得
1. **NLP 處理**：中文自然語言處理比預期困難，需要處理多種表達方式
2. **架構設計**：前後端分離架構帶來開發彈性，但也增加整合複雜度
3. **使用者體驗**：好的對話設計需要考慮各種邊界情況和容錯處理

### 遇到的挑戰
1. 中文金額辨識（如「五百塊」轉 500）
2. 模糊日期處理（如「上禮拜」）
3. 類別自動判斷的準確度提升

### 未來改進方向
1. 串接 LINE Bot，讓使用更加便利
2. 整合 Google Dialogflow 增強 NLP 能力
3. 加入更多圖表類型與財務報表
4. 支援多使用者與資料同步

---

## 📦 專題繳交檔案清單

| 項目 | 檔案名稱 | 說明 |
|------|----------|------|
| ✅ YouTube 影片 | （連結） | 權限設定為「不公開」 |
| ✅ A1 數位海報 | `poster_A1.pdf` / `poster_A1.png` | （待製作） |
| ✅ Dialogflow 匯出 | `dialogflow_export.zip` | （若有使用 Dialogflow） |
| ✅ 期末報告簡報 | `期末報告.pptx` | （待製作） |
| ✅ 程式碼 | `finbot/` | 完整專案程式碼 |

---

## 🔗 相關連結

- **GitHub Repository**：（請填入）
- **部署網址**：（若有部署）
- **YouTube 影片**：（請填入不公開連結）

---

## 📚 參考資料

1. Vue 3 官方文件：https://vuejs.org/
2. FastAPI 官方文件：https://fastapi.tiangolo.com/
3. jieba 中文分詞：https://github.com/fxsjy/jieba
4. Web Speech API：https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API

---

*最後更新：2024年12月*
